<div class="cotizacion">

    <div class="row justify-content-evenly hide-on-phone">
        <div *ngFor="let stepBox of listaStepBox" class="col-md-2">
            <app-step-box 
                [stepBox]="stepBox" 
                [currentStep]="step"
                (outputStep)="stepBoxSelected($event)">
            </app-step-box>
        </div>
    </div>
    
    <form class="cotizacion-form" [formGroup]="formGroup" #signupForm="ngForm">

        <!-- SECTION 1 -->
        <div [ngStyle]="{'display': (isStep(1)) ? 'block' : 'none' }">
            <section class="nuevo-evento-step">
                <div class="container">
                    <h2>Seleccionar Vehiculo</h2>
            
                    <div class="row mt-3">
                        <div class="col-md-3 col-sm-12 mb-4">
                            <select class="form-select" formControlName="tipoVehiculo" (change)="getListaMarcaByTipoVehiculo()">
                                <option selected hidden value="">Tipo de vehiculo</option>
                                <option *ngFor="let tipoVehiculo of listaTipoVehiculo" [value]="tipoVehiculo">{{tipoVehiculo}}</option>
                            </select>
                        </div>
                        
                        <div class="col-md-3 col-sm-12 mb-4">
                            <select class="form-select" formControlName="marca" (change)="getAllByMarcaAndTipoVehiculo()">
                                <option selected hidden value="">Marca</option>
                                <option *ngFor="let marca of listaMarca" [value]="marca.nombre">{{marca.nombre}}</option>
                            </select>
                        </div>

                        <div class="col-md-3 col-sm-12 mb-4">
                            <select class="form-select" formControlName="modelo">
                                <option selected hidden value="">Modelo</option>
                                <option *ngFor="let modelo of listaModelo" [value]="modelo.nombre">{{modelo.nombre}}</option>
                            </select>
                        </div>

                        <div class="col-md-3 col-sm-12">
                            <select class="form-select" formControlName="anio">
                                <option selected hidden value="">Año<option>
                                <option *ngFor="let anio of listaAnio" [value]="anio">{{anio}}</option>
                            </select>
                        </div>
                    </div>
                <!-- checkbox "No encuentro mi vehiculo" y que cambie los select 
                por inputs -->
                </div>
            </section>
        </div>

        <!-- SECTION 2 -->
        <div [ngStyle]="{'display': (isStep(2)) ? 'block' : 'none' }">

            <section class="nuevo-evento-step">
                <div class="container">

                    <h2>Datos del vehiculo</h2> 

                    <h4>¿Es de uso particular?</h4>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" [value]="true" formControlName="particular">
                        <label class="form-check-label">Si</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" [value]="false" formControlName="particular">
                        <label class="form-check-label">No</label>
                    </div>


                    <h4>¿Tiene alarma?</h4>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" [value]="true" formControlName="alarma">
                        <label class="form-check-label">Si</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" [value]="false" formControlName="alarma">
                        <label class="form-check-label">No</label>
                    </div>

                    <h4>¿Se guarda en garage?</h4>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" [value]="true" formControlName="garaje">
                        <label class="form-check-label">Si</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" [value]="false" formControlName="garaje">
                        <label class="form-check-label">No</label>
                    </div>

                    <div class="col-4">
                        <h4>¿Cuántos KMS manejás al año?</h4> 
                        <select class="form-select" formControlName="intervaloKilometros">
                            <option selected hidden value="">KMS manejados</option>
                            <option *ngFor="let kms of listaIntervaloKilometros" [value]="kms">{{kms | stringSinUnderscore}}</option>
                        </select>
                    </div>
                </div>

            </section>
        </div>


        <!-- SECTION 3 -->
        <div [ngStyle]="{'display': (isStep(3)) ? 'block' : 'none' }">
            <section class="nuevo-evento-step">
                <div class="container">

                    <h2>Datos del Seguro</h2> 

                    <div class="col-4">
                        <h4>Tipo de Seguro</h4> 
                        <select class="form-select" formControlName="tipoSeguro">
                            <option selected hidden value="">Tipo de seguro</option>
                            <option *ngFor="let seguro of listaTipoSeguro" [value]="seguro">{{seguro | stringSinUnderscore}}</option>
                        </select>
                    </div>

                    <div class="col-4">

                        <h4>Edad</h4> 
                        <select class="form-select" formControlName="intervaloEdad">
                            <option selected hidden value="">Edad</option>
                            <option *ngFor="let edad of listaIntervaloEdad" [value]="edad">{{edad | stringSinUnderscore}}</option>
                        </select>
                    </div>
                    
                    <h4>Además de usted, ¿maneja el auto un menor de 25 años?</h4>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" [value]="true" formControlName="hijos">
                        <label class="form-check-label">Si</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" [value]="false" formControlName="hijos">
                        <label class="form-check-label">No</label>
                    </div>
                </div>
            </section>
        </div>

        <!-- SECTION 4 -->
        <div [ngStyle]="{'display': (isStep(4)) ? 'block' : 'none' }">
            <section class="nuevo-evento-step">
                <div class="container">

                    <h2>Datos de contacto</h2> 


                    <div class="row">
                        <div class="col-md-4 col-sm-12">
                            <div class="row">
                                <label class="col-4">Nombre</label>
                                <div class="col-8" *ngIf="nombre?.invalid && nombre?.touched || submited">
                                    <span *ngIf="nombre?.errors" class="invalid-validator">Ingrese su nombre</span>

                                </div>
                            </div>
                            <input type="text" class="form-control" formControlName="nombre"
                            [ngClass]="{'is-invalid': cuil?.errors && submited }">
                        </div>

                        <div class="col-md-4 col-sm-12">
                            <div class="row">
                                <label class="col-4">Apellido</label>
                                <div class="col-8" *ngIf="(apellido?.invalid && apellido?.touched) || submited">
                                    <div *ngIf="apellido?.errors" class="invalid-validator">Ingrese su apellido</div>
                                </div>
                            </div>
                            <input type="text" class="form-control" formControlName="apellido" 
                            [ngClass]="{'is-invalid': apellido?.errors && submited }" >
                        </div>
                    </div>
                </div>
                
                <div class="container mt-3">
                    <div class="row">
                        <div class="col-md-4 col-sm-12">
                            <div class="row">
                                <label class="col-4">CUIT/CUIL</label>
                                <div class="col-8" *ngIf="(cuil?.invalid && cuil?.touched) || submited">
                                    <div *ngIf="cuil?.errors" class="invalid-validator">Ingrese su cuil o cuit</div>
                                </div>
                            </div>
                            <input type="number" class="form-control" formControlName="cuil"
                            [ngClass]="{'is-invalid': cuil?.errors && submited }">
                        </div>

                        <div class="col-md-4 col-sm-12">
                            <div class="row">
                                <label class="col-6">Fecha de Nacimiento</label>
                                <div class="col-6" *ngIf="fechaNacimiento?.invalid && submited">
                                    <div *ngIf="fechaNacimiento?.errors" class="invalid-validator">Ingrese su fecha de nac.</div>
                                </div>
                            </div>
                            <input type="date" class="form-control" formControlName="fechaNacimiento"
                            [ngClass]="{'is-invalid': fechaNacimiento?.errors && submited }">
                        </div>

                        <div class="col-md-4 col-sm-12">
                            <div class="row">                                
                                <label class="col-4">Sexo</label>
                                <div class="col-8" *ngIf="(sexo?.invalid && sexo?.touched) || submited">
                                    <div *ngIf="sexo?.errors" class="invalid-validator">Ingrese su sexo</div>
                                </div>
                            </div>  
                            <select class="form-select" formControlName="sexo"
                            [ngClass]="{'is-invalid': sexo?.errors && submited }">
                                <option selected value="">Sexo</option>
                                <option *ngFor="let sexo of listaSexo" [value]="sexo">{{sexo}}</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="container mt-3">
                    <div class="row">
                        <div class="col-md-4 col-sm-12">
                            <div class="row">
                                <label class="col-4">Ciudad</label>
                                <div class="col-8" *ngIf="(ciudad?.invalid && ciudad?.touched) || submited">
                                    <div *ngIf="ciudad?.errors" class="invalid-validator">Ingrese su ciudad</div>
                                </div>
                            </div>
                            <input type="text" class="form-control" formControlName="ciudad"
                            [ngClass]="{'is-invalid': ciudad?.errors && submited }">
                        </div>
                        <div class="col-md-4 col-sm-12">
                            <div class="row">
                                <label class="col-4">Provincia</label>
                                <div class="col-8" *ngIf="(provincia?.invalid && provincia?.touched) || submited">
                                    <div *ngIf="provincia?.errors" class="invalid-validator">Ingrese su provincia</div>
                                </div>
                            </div>
                            <input type="text" class="form-control" formControlName="provincia"
                            [ngClass]="{'is-invalid': provincia?.errors && submited }">
                        </div>
                        <div class="col-md-4 col-sm-12">
                            <div class="row">
                                <label class="col-4">Codigo Postal</label>
                                <div class="col-8" *ngIf="(codigoPostal?.invalid && codigoPostal?.touched) || submited">
                                    <div *ngIf="codigoPostal?.errors" class="invalid-validator">Ingrese su codigo postal</div>
                                </div>
                            </div>
                            <input type="number" class="form-control" formControlName="codigoPostal"
                            [ngClass]="{'is-invalid': codigoPostal?.errors && submited }">
                        </div>
                    </div>
                </div>

                <div class="container mt-3">
                    <div class="row">
                        <div class="col-md-4 col-sm-12">
                            <div class="row">
                                <label class="col-4">E-mail</label>
                                <div class="col-8" *ngIf="(email?.invalid && email?.touched) || submited">
                                    <div *ngIf="email?.errors" class="invalid-validator">Ingrese su e-mail</div>
                                </div>
                            </div>
                            <input type="email" class="form-control" formControlName="email"
                            [ngClass]="{'is-invalid': email?.errors && submited }">
                        </div>

                        <div class="col-md-4 col-sm-12">
                            <div class="row">
                                <label class="col-4">Celular</label>
                                <div class="col-8" *ngIf="(celular?.invalid && celular?.touched) || submited">
                                    <div *ngIf="celular?.errors" class="invalid-validator">Ingrese su celular</div>
                                </div>
                            </div>
                            <input type="number" class="form-control" formControlName="celular"
                            [ngClass]="{'is-invalid': celular?.errors && submited }">
                        </div>

                        <div class="col-md-4 col-sm-12">
                            <label>Nombre de la empresa (Opcional)</label>
                            <input type="text" class="form-control" formControlName="empresa">
                        </div>
                    </div>
                </div>

            </section>
        </div>

        <div class="botones-nuevo-evento">
            <button (click)="atras()" [disabled]="botonAtrasDisabled" type="button" [ngClass]="botonAtrasDisabled ? 'btn btn-secondary' : 'btn btn-primary'" class="mx-2">Atras</button>
            <button (click)="siguiente()" type="button" class="btn btn-primary">{{botonSiguienteFinalizado}}</button>
        </div>

    </form>
</div>

<app-modal [cliente]="cliente"></app-modal>